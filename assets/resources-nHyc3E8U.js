import{A as c,j as e,C as b,r as j,D as v,G as z}from"./index-72Cx3qAR.js";import{C as T,B as h,u as w,S as R,R as L,T as E,a as I}from"./usePagination-DSl9ru-4.js";import{C as P,k as B,T as f,G as F,P as G,E as V,l as i,h as A}from"./ResourceIcon-BpeZp6hd.js";import{L as D,a as O,T as H,u as C,b as M}from"./TradeRank-CYBavrSd.js";function W({selling:d,buying:l,...s}){const u=c(r=>r.remove),m=c(r=>r.buy),p=c(r=>r.sell),a=d||l;return e.jsxs(P,{variant:"elevation",sx:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs(B,{children:[e.jsxs(f,{variant:"h5",fontSize:{xs:20,sm:24},component:"div",display:"flex",alignItems:"center",gap:1,lineHeight:1,children:[e.jsx(F,{name:s.icon,category:"resources",sx:{color:r=>r.palette.text.secondary}}),s.name]}),e.jsxs(b,{sx:{color:"text.secondary",mb:1,mt:.25},display:"flex",gap:1,children:[e.jsx(D,{title:s.source,color:"textSecondary",fontSize:"inherit",component:O,to:s.type.includes("Существо")?"/creatures":"/plants",search:{c:s.source},children:s.type}),e.jsx("span",{children:s.attribute}),e.jsx("span",{children:s.rank})]}),e.jsx(f,{sx:{color:"text.secondary",fontSize:14,mb:.25},children:s.effect}),e.jsx(f,{variant:"body2",children:s.description})]}),e.jsx(T,{sx:{justifyContent:a?"space-between":void 0},children:a?e.jsxs(e.Fragment,{children:[e.jsxs(h,{size:"small",variant:"text",onClick:()=>u(s.name),children:["Снять с ",d?"продажи":"покупки"]}),e.jsx(H,{name:s.name})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{size:"small",onClick:()=>p(s),children:"Продать"}),e.jsx(h,{size:"small",onClick:()=>m(s),children:"Купить"})]})})]})}const $=j.memo(function(){const{status:l,data:s,error:u}=v(),m=c(C(n=>Object.fromEntries(n.selling.map(t=>[t.name,!0])))),p=c(C(n=>Object.fromEntries(n.buying.map(t=>[t.name,!0])))),[a,r]=z("",500),[x,k]=j.useState([]),g=j.useMemo(()=>{const n=a.trim().toLowerCase();let t=(s==null?void 0:s.items)||[];return x.length&&(t=t.filter(o=>x.includes(o.rank))),n?t.filter(o=>[o.name,o.type,o.attribute].join(";").toLowerCase().includes(n)):t},[s,x,a]),{paginate:S,...y}=w(g.length,9);return l==="pending"?e.jsx(G,{}):l==="error"?e.jsx(V,{message:u.message}):e.jsxs(e.Fragment,{children:[e.jsxs(i,{container:!0,spacing:{xs:1,sm:1,md:2},children:[e.jsx(i,{size:12,children:e.jsx(A,{placeholder:"Поиск",fullWidth:!0,startAdornment:e.jsx(R,{sx:{color:"action.active",mr:1,my:.5}}),onChange:n=>r(n.target.value)})}),e.jsx(i,{size:12,children:e.jsx(M,{})}),e.jsx(i,{display:"flex",size:{sm:12,md:6},justifyContent:"flex-start",children:e.jsx(L,{ranks:x,setRanks:k})}),e.jsx(i,{size:{xs:12,sm:12,md:6},children:e.jsx(E,{...y})})]}),e.jsx(b,{sx:{width:"100%",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(min(350px, 100%), 1fr))",gap:2,pb:2},children:S(g).map(n=>e.jsx(W,{selling:!!m[n.name],buying:!!p[n.name],...n},n.name))}),e.jsx(I,{...y})]})}),Q=$;export{Q as component};
