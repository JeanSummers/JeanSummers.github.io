import{A as a,j as e,C as j,D as h,r as f,G as g}from"./index-B_c5xwaP.js";import{C as y,k as C,T as d,G as b,B as p,P as k,E as S,l as u,m as v,F as z}from"./CardsContainer-DhSPnq-b.js";import{o as R,r as w,S as E,a as F,R as B,B as L}from"./Pagination-CLm2856f.js";import{L as T,a as I,T as G,u as m,b as P}from"./TradeRank-CcjA7H1B.js";import{C as V}from"./CardActions-GlOM_rfH.js";function A({selling:i,buying:t,...s}){const c=a(n=>n.remove),r=a(n=>n.buy),l=a(n=>n.sell),o=i||t;return e.jsxs(y,{variant:"elevation",sx:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs(C,{children:[e.jsxs(d,{variant:"h5",fontSize:{xs:20,sm:24},component:"div",display:"flex",alignItems:"center",gap:1,lineHeight:1,children:[e.jsx(b,{name:s.icon,category:"resources",sx:{color:n=>n.palette.text.secondary}}),s.name]}),e.jsxs(j,{sx:{color:"text.secondary",mb:1,mt:.25},display:"flex",gap:1,children:[e.jsx(T,{title:s.source,color:"textSecondary",fontSize:"inherit",component:I,to:s.type.includes("Существо")?"/creatures":"/plants",search:{c:s.source},children:s.type}),e.jsx("span",{children:s.attribute}),e.jsx("span",{children:s.rank})]}),e.jsx(d,{sx:{color:"text.secondary",fontSize:14,mb:.25},children:s.effect}),e.jsx(d,{variant:"body2",children:s.description})]}),e.jsx(V,{sx:{justifyContent:o?"space-between":void 0},children:o?e.jsxs(e.Fragment,{children:[e.jsxs(p,{size:"small",variant:"text",onClick:()=>c(s.name),children:["Снять с ",i?"продажи":"покупки"]}),e.jsx(G,{name:s.name})]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{size:"small",onClick:()=>l(s),children:"Продать"}),e.jsx(p,{size:"small",onClick:()=>r(s),children:"Купить"})]})})]})}const D=R(function(){const{status:t,data:s,error:c}=h(),r=w;f.useEffect(()=>{var n;(n=s==null?void 0:s.items)!=null&&n.length&&r.sync(s.items)},[s,r]);const l=a(m(n=>Object.fromEntries(n.selling.map(x=>[x.name,!0])))),o=a(m(n=>Object.fromEntries(n.buying.map(x=>[x.name,!0]))));return t==="pending"?e.jsx(k,{}):t==="error"?e.jsx(S,{message:c.message}):e.jsxs(e.Fragment,{children:[e.jsx(E,{children:e.jsxs(u,{container:!0,spacing:{xs:1,md:2},children:[e.jsx(u,{size:{xs:12,md:6},children:e.jsx(F,{store:r.search})}),e.jsx(u,{size:{sm:12,md:6},display:"flex",alignItems:"center",width:"100%",children:e.jsx(B,{store:r.rank})})]})}),e.jsx(v,{variant:"resource",items:r.pagination.paginated,render:n=>e.jsx(A,{selling:!!l[n.name],buying:!!o[n.name],...n},n.name)}),e.jsxs(z,{children:[e.jsx(g,{children:e.jsx(P,{})}),e.jsx(L,{store:r.pagination})]})]})}),K=D;export{K as component};
