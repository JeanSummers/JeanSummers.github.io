import{j as e,C as c,a0 as r,D as I,r as _,a1 as v,G as C}from"./index-72Cx3qAR.js";import{C as R,B as L,u as T,S as A,R as V,T as k,a as S}from"./usePagination-DSl9ru-4.js";import{C as O,k as b,T as t,P as w,E as z,l as p,h as B}from"./ResourceIcon-BpeZp6hd.js";import{u as E,C as F,R as g,N as W,D as h,A as N,M,I as G,a as H,b as $,s as q}from"./sortStarred-CuQ3Yt4S.js";import{L as J}from"./Popover-CvwXHJdv.js";function K(s){const i=E();return e.jsxs(O,{variant:"elevation",sx:{display:"flex"},children:[e.jsx(F,{component:"img",image:s.image,alt:s.name,sx:{maxWidth:{xs:100,sm:200},minWidth:{xs:100,sm:200},objectFit:{xs:"scale-down",sm:"cover"}}}),e.jsxs(c,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between"},children:[e.jsxs(b,{children:[e.jsxs(t,{variant:"h5",fontSize:{xs:20,sm:24},component:"div",display:"flex",alignItems:"center",lineHeight:1,children:[s.name,e.jsx(g,{name:s.rank,category:"plant",color:"textSecondary",fontSize:"inherit",component:"span",ml:1}),s.starred&&e.jsx(c,{marginLeft:"auto",title:"Добавлено в недавнем обновлении!",children:e.jsx(W,{color:"warning"})})]}),e.jsxs(t,{gutterBottom:!0,sx:{color:"text.secondary",fontSize:14},children:[s.division," | ",s.plantClass," | ",s.order]}),e.jsx(t,{variant:"body2",children:s.shortDescription})]}),e.jsx(R,{children:e.jsx(L,{onClick:()=>i({search:{c:s.name}}),children:"Читать далее"})})]})]},s.name)}const Q={Аврория:()=>r(()=>import("./Аврория-D3Bdbbgt.js"),[]),Агония:()=>r(()=>import("./Агония-Bh1edyGr.js"),[]),Аримафея:()=>r(()=>import("./Аримафея-D5H-0VX9.js"),[]),Аромиял:()=>r(()=>import("./Аромиял-ZHMu-qSq.js"),[]),"Бутылочное дерево":()=>r(()=>import("./Бутылочное дерево-Bd4_YxD6.js"),[]),Крето:()=>r(()=>import("./Крето-BiLO-31f.js"),[]),"Ге-гинном":()=>r(()=>import("./Ге-гинном-GT3vUzpo.js"),[]),Дакробелум:()=>r(()=>import("./Дакробелум-BuKUJIa3.js"),[]),Златоцвет:()=>r(()=>import("./Златоцвет-D5g4KJzs.js"),[]),Калейд:()=>r(()=>import("./Калейд-CshBCvgh.js"),[]),Корнахель:()=>r(()=>import("./Корнахель-CkMaztYe.js"),[]),Нахема:()=>r(()=>import("./Нахема-BYVTn1mT.js"),[]),"Цветок жизни":()=>r(()=>import("./Цветок жизни-DXRVOjXs.js"),[])};function U(s){return e.jsxs(e.Fragment,{children:[e.jsx(c,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(c,{component:"img",src:s.image,maxWidth:"100%",maxHeight:"40vh"})}),e.jsx(h,{sx:{my:2}}),e.jsxs(c,{tabIndex:-1,display:"grid",gridTemplateColumns:"140px 1fr",gap:1,justifyItems:"flex-start",sx:{color:i=>i.palette.text.primary},children:[e.jsx(a,{title:"Другие имена"}),e.jsx(t,{children:s.alternativeNames.join(", ")}),e.jsx(a,{title:"Отдел"}),e.jsx(t,{children:s.division}),e.jsx(a,{title:"Класс"}),e.jsx(t,{children:s.plantClass}),e.jsx(a,{title:"Доступ"}),e.jsx(N,{rank:s.access}),e.jsx(a,{title:"Порядок"}),e.jsx(t,{children:s.order}),e.jsx(a,{title:"Семейство"}),e.jsx(t,{children:s.family}),e.jsx(a,{title:"Ранг"}),e.jsx(g,{name:s.rank,category:"plant"}),e.jsx(a,{title:"Редкость"}),e.jsx(g,{name:s.rarity,category:"rarity"}),e.jsx(a,{title:"Ареал"}),e.jsx(t,{children:s.habitat}),e.jsx(a,{title:"Возраст"}),e.jsx(t,{children:s.age}),e.jsx(a,{title:"Атрибут"}),e.jsx(t,{children:s.attributes.join(", ")})]}),e.jsx(h,{sx:{my:2}}),e.jsx(X,{name:s.name}),e.jsx(h,{sx:{my:2}}),e.jsx(M,{name:s.name,source:Q})]})}function a({title:s}){return e.jsxs(t,{fontWeight:"bold",children:[s,":"]})}function X({name:s}){const{data:i,isLoading:l}=I();if(l)return e.jsx(J,{});const o=i==null?void 0:i.plantLookup.get(s);return o!=null&&o.length?e.jsx(c,{display:"flex",flexWrap:"wrap",gap:1,children:o.map(n=>e.jsxs(c,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(G,{name:n.icon,title:`${n.resource} | ${n.effect}`,info:n.description,category:"resources",fontSize:"large",sx:{color:m=>m.palette.text.secondary}}),e.jsx(t,{children:n.attribute}),e.jsx(t,{children:n.rank})]},n.name))}):e.jsx(t,{color:"textSecondary",children:"Из существа нельзя получить ресурсы"})}const Y=_.memo(function(){const{c:i}=H(),l=E(),{data:o}=v(),n=o==null?void 0:o.lookup.get(i);if(!n)return null;const m=()=>l({});return e.jsx($,{open:!0,onClose:m,title:n.name,content:e.jsx(U,{...n})})}),Z=_.memo(function(){const{status:i,data:l,error:o}=v(),[n,m]=C("",500),[j,P]=_.useState([]),f=_.useMemo(()=>{const x=n.trim().toLowerCase();let u=q((l==null?void 0:l.items)||[]);return j.length&&(u=u.filter(d=>j.includes(d.rank))),x?u.filter(d=>[d.name,d.division,d.shortDescription,...d.attributes,...d.alternativeNames].join(";").toLowerCase().includes(x)):u},[l,j,n]),{paginate:D,...y}=T(f.length,4);return i==="pending"?e.jsx(w,{}):i==="error"?e.jsx(z,{message:o.message}):e.jsxs(e.Fragment,{children:[e.jsxs(p,{container:!0,spacing:{xs:1,sm:1,md:2},children:[e.jsx(p,{size:12,children:e.jsx(B,{placeholder:"Поиск",fullWidth:!0,startAdornment:e.jsx(A,{sx:{color:"action.active",mr:1,my:.5}}),onChange:x=>m(x.target.value)})}),e.jsx(p,{display:"flex",size:{sm:12,md:6},justifyContent:"flex-start",children:e.jsx(V,{ranks:j,setRanks:P})}),e.jsx(p,{size:{xs:12,sm:12,md:6},children:e.jsx(k,{...y})})]}),e.jsx(c,{sx:{width:"100%",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(min(400px, 100%), 1fr))",gap:2,pb:2},children:D(f).map(x=>e.jsx(K,{...x},x.name))}),e.jsx(S,{...y}),e.jsx(Y,{})]})}),ie=Z;export{ie as component};
